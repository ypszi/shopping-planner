service: shopping-planner

provider:
  name: aws
  region: eu-north-1
  runtime: provided.al2
  httpApi:
    payload: '2.0'
  environment:
    APP_ENV: prod
    S3_BUCKET: shopping-planner-thumbnails-eu-north-1
  iam:
    role:
      statements:
        - Effect: Allow
          Action:
            - s3:ListBucket
          Resource: arn:aws:s3:::shopping-planner-thumbnails-eu-north-1
        - Effect: Allow
          Action:
            - s3:GetObject
            - s3:PutObject
          Resource: arn:aws:s3:::shopping-planner-thumbnails-eu-north-1/*

functions:
  web:
    handler: web/index.php
    runtime: php-82-fpm
    events:
      - httpApi: '*'

plugins:
  - ./vendor/bref/bref
